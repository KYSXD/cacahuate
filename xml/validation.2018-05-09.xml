<process-spec>
  <process-info>
    <author>categulario</author>
    <date>2018-05-09</date>
    <name>Validation</name>
    <public>true</public>
    <description>A process with a validation node</description>
  </process-info>
  <process>
    <action id="start-node">
      <node-info>
        <name>Primer paso</name>
        <description>Resolver una tarea</description>
      </node-info>
      <form-array>
        <form id="work">
          <input label="task" type="text" name="task"></input>
        </form>
      </form-array>
    </action>

    <validation id="approval-node" >
      <auth-filter backend="backref">
        <param name="identifier" type="ref">user#start-node</param>
      </auth-filter>
      <dependencies>
        <dep>work.task</dep>
      </dependencies>
      <node-info>
        <name>Aprobacion gerente reserva </name>
        <description>aprobar reserva</description>
      </node-info>

      <auth-filter backend="quemado">
        <param name="operation">Transfer</param>
        <param name="relation">gerente</param>
        <param name="inventario_destino" type="ref">form#transfer_form.inventario_destino</param>
      </auth-filter>
    </validation>

    <action id="final-node">
      <form-array>
        <form id="confirm">
          <input type="text" name="exit"></input>
        </form>
      </form-array>
    </action>
  </process>
</process-spec>
